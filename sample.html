<!DOCTYPE html>
<html lang="en">
  <head>
    <title>STM Shuttle Tracker - [SCHOOL]</title>
    
    [METAR]

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#2D4E95" />
    <meta name="og:site_name" content="AustinHuang.me" />
    <meta name="og:type" content="website" />
    <meta name="og:url" content="https://stm.austinhuang.me/[school]" />
    <meta name="og:image" content="https://cdn.glitch.com/f760b15e-1eb8-484a-838a-6431059cae3c%2Ficon.jpg?v=1583878149796" />
    <meta name="og:image:alt" content="Track shuttle buses!" />
    <meta name="og:title" content="STM Shuttle Tracker - [SCHOOL]" />
    <meta
      name="og:description"
      content="Track STM &quot;Ã‰cole&quot; (school) buses for [SCHOOL], with real-time schedule prediction!"
    />
    <meta
      name="description"
      content="Track STM &quot;Ã‰cole&quot; (school) buses for [SCHOOL], with real-time schedule prediction!"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
      integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
      crossorigin=""
    />
    <script
      src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
      integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
      crossorigin=""
    ></script>
  </head>
  <body>
    [OLD]

    <div id="mapid" style="width: 100%; height: 400px;"></div>
    <p>
      <center><button type="button" onclick="refresh()">
        Auto-Refresh (30s interval)
        </button> (Status: <b id="ON" style="color:green;visibility:hidden;">ON</b> <b id="OFF" style="color:red;">OFF</b>) <small>(Not recommended for phones)</small></center>
    </p>
    <ul>
        <li>ðŸ“¡ Time when STM received the location of the bus</li>
        <li>ðŸ”® Predicted arrival</li>
        <li>â¬¤ Bus has passed the stop</li>
        <li>â—¯ Bus has NOT reached the stop</li>
        <li>â—‹ Presumed "En Transit" terminus</li>
    </ul>
    <p>
      <a href="./">Back to homepage</a>. Made by
      <a href="https://austinhuang.me">Austin Huang</a>.
    </p>
    <p>
      <small
        >By using this tool, you agree to the terms and conditions imposed by
        <a href="http://www.stm.info/en/about/developers/terms-use"
          >the STM</a
        >
        (Bus data), <a href="https://glitch.com/legal/">Glitch</a> (Backend),
        <a href="https://wiki.osmfoundation.org/wiki/Terms_of_Use"
          >OpenStreetMap</a
        >
        (Map), and
        <a href="https://www.cloudflare.com/terms/">Cloudflare</a> (HTTPS
        stuff). Data are sourced directly from the STM. This work is licensed
        under a
        <a
          rel="license"
          href="http://creativecommons.org/licenses/by-nc-sa/4.0/"
          >Creative Commons Attribution-NonCommercial-ShareAlike 4.0
          International License</a
        >.</small
      >
    </p>
    <script>
        var mymap = L.map("mapid").setView([CENTER]),
            r = [REFRESH];

        var greenIcon = L.icon({
          iconUrl:
            "https://cdn.glitch.com/f760b15e-1eb8-484a-838a-6431059cae3c%2Fbus.png?v=1583781456239"
        });

        L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
          attribution:
            '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors[TIME]'
        }).addTo(mymap);

        [BUSES]
      
        function refresh() {
          if (!r) {
            r = true;
            document.getElementById("OFF").style.visibility = "hidden";
            document.getElementById("ON").style.visibility = null;
            setTimeout(() => window.location.href = "https://stm.austinhuang.me/[school]?refresh=true", 30000);
          }
          else {
            window.location.href = "https://stm.austinhuang.me/[school]";
          }
        }
    </script>
  </body>
</html>
